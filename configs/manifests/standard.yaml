version: "1.0"
metadata:
  name: "Standard NIREON Manifest"
  description: "Default component configuration for NIREON with proper service definitions"
  author: "NIREON Team"
  created_at: "2025-06-05T10:00:00Z"
  updated_at: "2025-06-05T12:00:00Z"

shared_services:
  EventBusPort:
    enabled: true
    class: "infrastructure.event_bus.memory_event_bus.MemoryEventBus"
    config:
      max_history: 1000
      enable_persistence: false

  LLMPort:
    enabled: true
    class: "infrastructure.llm.openai_llm.OpenAILLMAdapter"
    config:
      api_key_env: "OPENAI_API_KEY"
      model: "gpt-4"
      timeout: 30
      max_retries: 3

  EmbeddingPort:
    enabled: true
    class: "infrastructure.embeddings.openai_embeddings.OpenAIEmbeddingAdapter"
    config:
      api_key_env: "OPENAI_API_KEY"
      model: "text-embedding-3-small"
      dimensions: 1536

  IdeaRepositoryPort:
    enabled: true
    class: "infrastructure.persistence.postgres_idea_repository.PostgresIdeaRepository"
    config:
      connection_string_env: "DATABASE_URL"
      pool_size: 10
      timeout: 30

  FeatureFlagsManager:
    enabled: true
    class: "infrastructure.feature_flags.FeatureFlagsManager"
    config:
      source: "config"  # Load from configuration

  IdeaService:
    enabled: true
    class: "application.services.idea_service.IdeaService"

  LLMRouter:
    enabled: false  # Enable if you need routing between multiple LLMs
    class: "application.services.llm_router.LLMRouter"
    config:
      default_provider: "openai"
      fallback_provider: "placeholder"

mechanisms:
  explorer_primary:
    enabled: true
    class: "components.mechanisms.explorer.service.ExplorerMechanism" 
    metadata_definition: "components.mechanisms.explorer.service.EXPLORER_METADATA" 
    config:
      max_depth: 3
      application_rate: 0.5
      divergence_strength: 0.2
      exploration_timeout: 60

observers:
  lineage_tracker:
    enabled: false  # Disabled since class path might not exist yet
    class: "components.observers.lineage_tracker.LineageTracker" 
    metadata_definition: "components.observers.lineage_tracker.LINEAGE_METADATA" 
    config:
      track_genealogy: true
      max_lineage_depth: 10

managers:
  flow_coordinator:
    enabled: false  # Disabled since class path might not exist yet# Corrected
    metadata_definition: "components.managers.flow_coordinator.FLOW_METADATA"
    config:
      coordination_strategy: "priority_based"
      max_concurrent_flows: 5

environment_overrides:
  development:
    shared_services:
      LLMPort:
        class: "bootstrap.bootstrap_helper.placeholders.PlaceholderLLMPortImpl"
      EmbeddingPort:
        class: "bootstrap.bootstrap_helper.placeholders.PlaceholderEmbeddingPortImpl"
  testing:
    shared_services:
      IdeaRepositoryPort:
        class: "bootstrap.bootstrap_helper.placeholders.PlaceholderIdeaRepositoryImpl"
      EventBusPort:
        class: "bootstrap.bootstrap_helper.placeholders.PlaceholderEventBusImpl"
  production:
    shared_services: {}  # Use real implementations in production